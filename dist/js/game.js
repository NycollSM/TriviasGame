async function API(e){const t=await fetch("https://triviaserver.herokuapp.com"+e);return await t.json()}API("/myUser").then(questions);const score=document.querySelector(".score");let wrapper=document.querySelector(".wrapper-trivia");const level=document.querySelector(".level"),title=document.querySelector(".name--user"),bntWatchScore=document.querySelector(".watchEnd"),wrapperEnd=document.querySelector(".end"),answers=document.querySelectorAll(".answers"),question=document.querySelector(".question"),next=document.querySelector(".next"),scorespan=document.querySelector(".score"),wrapperGame=document.querySelector(".wrapper-game");let btnScorePost=document.querySelector(".btn-score-submit"),num=-1,winScore=0;function loadAnimationReady(){document.querySelector(".animation_loader").className+=" hidden"}next.className="btn-ui";class modificArray{static randomQuestions(e,t){this.array=t,this.myquestion=e;for(let e=0;e<5;e++){let e=Math.floor(Math.random()*this.myquestion.length+0);this.array.push(this.myquestion[e])}return this.array}}class desorderOptions{mix(e){let t,n,o=e.length;for(;0!==o;)n=Math.floor(Math.random()*o),t=e[o-=1],e[o]=e[n],e[n]=t;return e}get objectDesorder(){return this.questions}set object(e){this.questions=e,this.questions.forEach(e=>this.mix(e.options))}}const classDesorder=new desorderOptions;function questions(e){const t=e.myQuestions;new modificArray;const n=modificArray.randomQuestions(t,[]);classDesorder.object=n,title.innerHTML=e.MyUser.User,level.innerHTML=e.MyUser.Level,loadAnimationReady(),slide()}function slide(){num>=3&&next.remove(),num++,next.style.display="none",changeHtmlQuestions(classDesorder.objectDesorder[num]),eventAllButtons()}function changeHtmlQuestions(e){question.innerHTML=e.question;for(let t=0;t<answers.length;t++)answers[t].innerHTML=e.options[t].answer,answers[t].setAttribute("data",e.options[t].value)}function structureEnd(){wrapper.remove(),wrapperEnd.style.display="block"}function eventAllButtons(){answers.forEach(e=>{e.style.backgroundColor="#52489C",e.addEventListener("click",pointWin)})}function changeState(){answers.forEach(e=>e.removeEventListener("click",pointWin)),answers.forEach(e=>{"true"==e.getAttribute("data")?e.style.backgroundColor="green":e.style.backgroundColor="red"})}function pointWin(e){4==num&&(bntWatchScore.style.display="block",bntWatchScore.addEventListener("click",structureEnd)),next.style.display="block","true"==e.target.getAttribute("data")&&(winScore+=5,collectScore()),changeState()}function collectScore(){score.innerHTML=winScore,API(`/score:newLevel=${scorespan.innerHTML}&User=${title.innerHTML}`)}function RenderQuestion(e){console.log(e),null==e?alert("no hay datos"):(PostNewQuestion(e),alert("se ha creado su nueva pregunta!"),window.location.href="play.html")}function PostNewQuestion(e){return fetch("https://triviaserver.herokuapp.com/questions",{method:"POST",body:JSON.stringify(e)}).then(e=>(console.log(e.json),e.json())).then(e=>{console.log(e)}).catch(e=>{console.log(e)})}btnScorePost.addEventListener("click",()=>window.location.href="play.html"),next.addEventListener("click",slide);const btnInfo=document.querySelector("#infodev"),newQ=document.querySelector("#newQ"),titleUser=document.querySelector(".name--user"),titleLevel=document.querySelector(".level"),btnPlay=document.querySelector("#btn-play"),wrapperViewplay=document.querySelector(".container2"),wrapperGmae=document.querySelector(".wrapper-game"),body=document.querySelector("body"),btnBack=document.querySelector(".btn--back");function RenderViewPlay(e){titleUser.innerHTML=e.MyUser.User,titleLevel.innerHTML=e.MyUser.Level,btnBack.style.display="block"}function DialogInfoComponent(){const e=document.createElement("div"),t=document.createElement("h3"),n=document.createElement("p"),o=document.createElement("h3"),r=document.createElement("p"),a=document.createElement("button");a.innerHTML="X",a.className="close--btn btn-ui",e.className="wrapper--info-dev",t.className="info--titles",o.className="info--titles",t.innerHTML="Acerca del juego",n.innerHTML="Este juego quiere ayudar a memorizar conceptos básicos y vocabulario técnico, que al inicio de los estudios es un poco complejo de recordar y que al mismo tiempo son importantes.",o.innerHTML="Acerca de los desarrolladores",r.innerHTML="El juego fue diseñado y desarrollado por Jimmy Alvarez y Nycoll Soto (Estudiantes del CETAV) con el fin de ayudar a futuras generaciones.",[a,t,n,o,r].forEach(t=>e.appendChild(t)),body.insertBefore(e,body.childNodes[0]),a.addEventListener("click",()=>e.remove())}function FormNewQuestion(){const e=document.createElement("button");e.innerHTML="X",e.className="close--btn";const t=document.createElement("dialog"),n=document.createElement("form"),o=document.createElement("div"),r=document.createElement("div"),a=document.createElement("textarea"),c=document.createElement("h3");c.innerHTML="Puedes crear tus preguntas !!",a.id="newQuestion",a.placeholder="Pregunta";const s=document.createElement("textarea"),l=document.createElement("textarea"),i=document.createElement("textarea"),u=document.createElement("input");u.type="button",u.value="enviar",u.className="btn-ui",s.id="answerCorrect",s.placeholder="Respuesta Correcta",l.id="answerIncorrect1",l.placeholder="Respuesta Incorrecta #1",i.id="answerIncorrect2",i.placeholder="Respuesta Incorrecta #2",n.id="question",t.className="form--questions",o.className="wrapper--form-question",r.className="wrapper--form--Select",o.appendChild(c),o.appendChild(a),[s,l,i].forEach(e=>r.appendChild(e)),n.appendChild(o),n.appendChild(r),n.appendChild(u);const d=document.querySelector("body");[e,n].forEach(e=>t.appendChild(e)),d.insertBefore(t,d.childNodes[0]),t.show(),e.addEventListener("click",()=>t.remove()),u.addEventListener("click",()=>{if(""==a.value||""==s.value||""==l.value||""==i.value)alert("error rellene los campos");else{RenderQuestion({id:0,question:a.value,options:[{value:!0,answer:s.value},{value:!1,answer:l.value},{value:!1,answer:i.value}]})}})}btnInfo.addEventListener("click",DialogInfoComponent),newQ.addEventListener("click",FormNewQuestion),btnPlay.addEventListener("click",()=>{wrapperViewplay.style.display="none",btnBack.style.display="none",wrapperGmae.style.display="block"}),API("/myUser").then(RenderViewPlay);